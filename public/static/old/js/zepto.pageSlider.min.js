!function(a,b){if("undefined"==typeof a)throw new Error("Zepto not found!");var c=/Android 2/i.test(b.navigator.userAgent)?!1:!0,d=function(){},e=b.requestAnimationFrame||function(a){a()},f=function(a,b,c){b=(b||"400")+"ms",c=c||"ease";var d=["all",b,c].join(" ");a.css({"-webkit-transition":d,transition:d})},g=function(a){a.css({"-webkit-transition":"none",transition:"none"})},h=function(a,b){this.$ctn=a,this.config=b,this.afterMoveTimeId=0,this.autoTimeId=0,$p1=a.find(b.pageSelector).eq(0),this.$pages=$p1.add($p1.siblings(b.pageSelector)),this.config.autoSpeed<this.config.easingTime+100&&(this.config.autoSpeed=this.config.easingTime+100)};h.prototype.init=function(){var c=(this.$ctn.offsetParent(),a("<div class='page-slider-inner' />")),d=this.config.height,e=this.config.width,g=this.$pages.length,h=0,i=100/g;d||(d=a(b).height()),e||(e=a(b).width()),isNaN(d)||(d+="px"),isNaN(e)||(e+="px"),this.$ctnInner=c,this.pageLen=g,this.curPage=h,this.pagePercent=i,this.$ctn.css({position:"relative",width:e,height:d,overflow:"hidden"}),d=this.$ctn.height(),e=this.$ctn.width(),this.ctnHeight=d,this.ctnWidth=e;var j={position:"absolute",top:0,left:0,width:"100%",height:g+"00%",overflow:"hidden"},k={position:"relative",display:"block"};for(var l in this.config.pageCss)k.hasOwnProperty(l)||(k[l]=this.config.pageCss[l]);this.config.horizontal?(j.width=g+"00%",j.height="100%",k["float"]="left",k.height="100%",k.width=i+"%"):(j.width="100%",j.height=g+"00%",k.height=i+"%",k.width="100%"),c.css(j),f(c,this.config.easingTime,this.config.easing),this.$pages.wrapAll(c).each(function(){a(this).css(k)}),this.eventBind()},h.prototype.eventBind=function(){var a,c,d=this,e=this.config.horizontal?"X":"Y",h={X:this.ctnWidth,Y:this.ctnHeight},i={X:0,Y:0},j={X:0,Y:0};this.$ctn.on("touchstart",function(a){i.X=a.touches[0].clientX,i.Y=a.touches[0].clientY,g(d.$ctnInner),d.config.auto&&b.clearTimeout(d.autoTimeId)}),this.$ctn.on("touchmove",function(b){b.preventDefault(),j.X=b.changedTouches[0].clientX-i.X,j.Y=b.changedTouches[0].clientY-i.Y,(Math.abs(j.Y)>Math.abs(j.X)&&"Y"==e||Math.abs(j.X)>Math.abs(j.Y)&&"X"==e)&&(b.stopPropagation(),c=j[e]/h[e]*100,a=-1*d.curPage*d.pagePercent+c/d.pageLen,d.innerMove(a))}),this.$ctn.on("touchend touchcancel",function(b){f(d.$ctnInner,d.config.easingTime,d.config.easing),c>=d.config.percentThreshold?d.movePrev():c<=-1*d.config.percentThreshold?d.moveNext():d.moveReset(),i.X=0,i.Y=0,j.X=0,j.Y=0,a=0,c=0,d.config.auto&&d.autoPlay()})},h.prototype.moveNext=function(a){var b=this.curPage,c=b+1;if(c>this.pageLen-1){if(!this.config.loop)return this.moveReset();c=0}this.moveTo(c,a)},h.prototype.movePrev=function(a){var b=this.curPage,c=b-1;if(0>c){if(!this.config.loop)return this.moveReset();c=this.pageLen-1}this.moveTo(c,a)},h.prototype.moveTo=function(a,c){var d,e=this,f=e.$pages.eq(this.curPage);return!c&&e.config.auto&&b.clearTimeout(e.autoTimeId),0>a||a>this.pageLen-1?!1:("function"==typeof this.config.beforeMove&&e.config.beforeMove(f,this.$pages.eq(a),a),d=-1*a*(100/this.pageLen)||0,this.innerMove(d),this.curPage=a,void("function"==typeof this.config.afterMove&&this.$ctnInner.one("webkitTransitionEnd",function(b){e.config.afterMove(f,e.$pages.eq(a),a),!c&&e.config.auto&&e.autoPlay()})))},h.prototype.moveReset=function(){var a=-1*this.curPage*(100/this.pageLen)||0;this.innerMove(a)},h.prototype.innerMove=function(a){var b,d,f=this;b=c?this.config.horizontal?"translate3d("+a+"%, 0, 0)":"translate3d(0, "+a+"%, 0)":this.config.horizontal?"translate("+a+"%, 0)":"translate(0, "+a+"%)",d={"-webkit-transform":b,transform:b},e(function(){f.$ctnInner.css(d)})},h.prototype.autoPlay=function(){var a=this;return this.config.auto?(b.clearTimeout(this.autoTimeId),void(this.autoTimeId=b.setTimeout(function(){a.moveNext(!0),a.autoPlay()},this.config.autoSpeed))):!1};var i={pageSelector:".page",height:null,width:null,horizontal:!1,autoSpeed:5e3,auto:!1,loop:!0,percentThreshold:10,easing:"ease-out",easingTime:400,pageCss:{},prevBtn:null,nextBtn:null,beforeMove:d,afterMove:d};a.fn.pageSlider=function(b){var c=a.extend(!0,{},i,b);return this.each(function(b,d){var e=a(d),f=new h(e,c);f.init(),f.config.auto&&f.autoPlay(),["prevBtn","nextBtn"].forEach(function(a,b){var c=f.config[a];if(c&&c.length>0){var d="move"+a.replace("Btn","").replace(/./,function(a){return a[0].toUpperCase()});c.on("touchend",function(){f[d]()})}})})}}(window.Zepto,window);